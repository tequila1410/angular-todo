<div class="container">
  <div class="main-list">
    <h2>Todo App</h2>

    <mat-form-field class="example-form-field" #newTaskInput>
      <input [(ngModel)]="taskValue" matInput type="text" placeholder="Add new task">
      <button
        *ngIf="taskValue"
        (click)="taskValue=''"
        mat-button matSuffix mat-icon-button aria-label="Clear">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>

    <button
      (click)="addNewTask()"
      mat-fab color="accent">
      <mat-icon>add</mat-icon>
    </button>

    <mat-form-field class="example-full-width">
      <input [(ngModel)]="searchText" matInput placeholder="Search...">
    </mat-form-field>

    <mat-selection-list #taskList>
      <div *ngFor="let task of tasks | filter : searchText" class="list-row">
        <mat-list-option (click)="changeTaskStatus(task.id)" [selected]="task.done">
          <span [class.completed]="task.done">{{task.name}}</span>
        </mat-list-option>
        <button
          (click)="deleteTask(task.id)"
          class="delete-btn"
          mat-raised-button color="warn">
          <mat-icon>delete_outline</mat-icon>
        </button>
      </div>
    </mat-selection-list>

    <p>
      Tasks done: {{taskList.selectedOptions.selected.length}} of {{taskList.options.length}}
    </p>

    <button
      (click)="getCsv()"
      class="download-csv-btn"
      mat-raised-button color="primary">
      Get csv
    </button>
  </div>
</div>
